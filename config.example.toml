[llm]
# DeepSeek V3.2 aliases
base_model = "deepseek-chat"
max_think_model = "deepseek-reasoner"
provider = "deepseek"
profile = "v3_2"
context_window_tokens = 1000000
temperature = 0.2
endpoint = "https://api.deepseek.com/chat/completions"
# Optional workspace-local key override (prefer env in CI/prod):
# api_key = "dsk-..."
api_key_env = "DEEPSEEK_API_KEY"
fast_mode = false
language = "en"
prompt_cache_enabled = true
timeout_seconds = 60
max_retries = 3
retry_base_ms = 400
stream = true

[router]
auto_max_think = true
threshold_high = 0.72
escalate_on_invalid_plan = true
max_escalations_per_unit = 1
w1 = 0.2
w2 = 0.15
w3 = 0.2
w4 = 0.15
w5 = 0.2
w6 = 0.1

[policy]
approve_edits = "ask"
approve_bash = "ask"
allowlist = ["rg", "git status", "git diff", "git show", "cargo test", "cargo fmt --check", "cargo clippy"]
block_paths = [".env", ".ssh", ".aws", ".gnupg", "**/id_*", "**/secret"]
redact_patterns = [
  "(?i)(api[_-]?key|token|secret|password)\\s*[:=]\\s*['\\\"]?[a-z0-9_\\-]{8,}['\\\"]?",
  "\\b\\d{3}-\\d{2}-\\d{4}\\b",
  "(?i)\\b(mrn|medical_record_number|patient_id)\\s*[:=]\\s*[a-z0-9\\-]{4,}\\b",
]
sandbox_mode = "allowlist"
# Optional OS-level sandbox wrapper for `sandbox_mode = "isolated"`:
# sandbox_wrapper = "bwrap --die-with-parent --new-session --unshare-all --bind {workspace} {workspace} --chdir {workspace} /bin/sh -lc {cmd}"
sandbox_wrapper = ""

[plugins]
enabled = true
search_paths = [".deepseek/plugins", ".plugins"]
enable_hooks = false

[plugins.catalog]
enabled = true
index_url = ".deepseek/plugins/catalog.json"
signature_key = "deepseek-local-dev-key"
refresh_hours = 24

[skills]
paths = [".deepseek/skills", "~/.deepseek/skills"]
hot_reload = true

[usage]
show_statusline = true
cost_per_million_input = 0.27
cost_per_million_output = 1.10

[context]
auto_compact_threshold = 0.86
compact_preview = true

[autopilot]
default_max_consecutive_failures = 10
heartbeat_interval_seconds = 5
persist_checkpoints = true

[scheduling]
off_peak = false
off_peak_start_hour = 0
off_peak_end_hour = 6
defer_non_urgent = false
max_defer_seconds = 0

[replay]
strict_mode = true

[ui]
enable_tui = true
keybindings_path = "~/.deepseek/keybindings.json"
reduced_motion = false
statusline_mode = "minimal"

[experiments]
visual_verification = false
wasm_hooks = false

[telemetry]
enabled = false
# endpoint = "https://telemetry.example.com/deepseek"

[index]
enabled = true
engine = "tantivy"
watch_files = true

[budgets]
max_turn_duration_secs = 300
max_reasoner_tokens_per_session = 1000000

[theme]
primary = "Cyan"
secondary = "Yellow"
error = "Red"
